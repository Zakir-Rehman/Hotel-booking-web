<%- layout("/layouts/boilerplate") -%>
  <!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> -->
  <%- include("../includes/tailwind.ejs") %>
    <div class="index-main-div  max-sm:mt-[80px]" id="index-div">
      <!-- font-size: 10vw;
    font-family: fantasy;
    text-transform: uppercase; -->
      <!-- <h3 class="text-center max-sm:text-[10vw] text-[10vw] font-fantasy uppercase heading-top">All Listings</h3> -->

      <% if (allListings && allListings.length> 0) { %>
        <div
          class="cards-main-div flex flex-wrap max-sm:w-[100%] justify-center  max-lg:justify-center max-lg:mt-[20px] ">

          <% for(let listing of allListings) { %>
            <a href="/listings/<%= listing._id %>" class="a-link relative single-card">
              <div class="card max-sm:w-[100%] a-div mt-[30px]">
                <img src="<%=listing.image.url %>" class="rounded-[0px]  images-db" alt="Listing image"
                  style="height: 14rem;" />
                <div class="card-img-overlay absolute flex justify-end top-[25px]  w-[100%] h-[15px] ">
                  <span class=" rounded-[50%]  ">
                    <a href="/listings/liked/<%= listing._id %>">
                      <!-- <i class="fa-regular fa-heart  text-[1.4rem]  hover:text-[4rem] hover:translate-y-[-30px] transition duration-200 ease-in  hover:blur-[2px] transition-transform font-semibold text-[red]"></i> -->
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="shadow-[0_0_2px_5px_white]  text-[1rem] text-[black] bg-[white] rounded-[50%]  hover:scale-120 transition duration-200 ease-in   transition-transform font-semibold"
                        aria-hidden="true">
                        <path
                          d="M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5">
                        </path>
                      </svg>
                    </a>
                  </span>
                </div>
                <div class="card-body  px-[3px] py-[3px]">
                  <div class="card-text gst-div">
                    <p class="">
                      <i class="fa-solid fa-hand-holding-dollar"></i> from &#8360; <%=
                        listing.price.toLocaleString("en-PK") %> / 2 night
                    </p>
                    <a href="/listings/<%= listing._id %>">
                      <p><i class="fa-solid fa-pencil"></i>
                        <%= listing.title %>
                      </p>
                    </a>
                    <p class="text-info"><i class="fa-solid fa-plus"></i> 18% GST</p>
                    <% if (listing.orderType || listing.bedrooms ) { %>
                      <p>
                        <i class="fa-solid fa-house"></i>
                        <span>
                          <%= listing.orderType %>
                        </span>
                        <i class="fa-solid fa-bed"></i>
                        <span>
                          Bedrooms <%= listing.bedrooms %>
                        </span>
                        <i class="fa-solid fa-user-group"></i>
                        <span>
                          Guests <%= listing.guests %>
                        </span>
                      </p>
                      <% } %>
                        <p>
                          <span> <i class="fa-solid fa-location-dot"></i>
                            <%= listing.country %>
                          </span>,<span>
                            <%= listing.location %>
                          </span>
                        </p>
                  </div>
                </div>
              </div>
            </a>
            <% } %>

        </div>

        <!-- <form method="GET" action="/listings/new" class="flex w-100 bg-[#F3F2F0] justify-center">
          <button class="btn btn-outline-danger fs-5">Create New Listing</button>
        </form> -->

        <% } else { %>
          <div class="div-not-found min-h-screen flex items-center justify-center">
            <div style="padding: 34px 0;"
              class="text-center pb-[59px] bg-white shadow-lg rounded-2xl p-10 max-w-md w-full border border-gray-200">
              <!-- Red Search Icon -->
              <div class="flex justify-center mb-5">
                <div class="bg-red-100 p-4 rounded-full">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-red-500" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M10 6a4 4 0 018 0m-8 0a4 4 0 108 0m-4 10a6 6 0 01-6-6V6a6 6 0 0112 0v4a6 6 0 01-6 6z" />
                  </svg>
                </div>
              </div>

              <!-- Main Message -->
              <h1 class="text-2xl font-semibold text-gray-800 mb-2">No Results Found</h1>
              <p class="text-gray-500 mb-6">
                We couldnâ€™t find any listings for this location.<br />
                Try searching for another destination.
              </p>

              <!-- Button -->
              <!-- inline-block px-6 py-[21px] bg-red-500 text-white font-medium rounded-full shadow-md hover:bg-red-600 transition-all no-underline  duration-200 -->
             <a href="/listings">

               <button class="btn btn-danger rounded-[30px]">
                 Back to Listing <i class="fa-solid fa-sim-card"></i>
                </button>
              </a>
            </div>
          </div>
          <% } %>

    </div>
    <script>
      let taxSwitch = document.querySelector('#switchCheckDefault')
      taxSwitch.addEventListener("click", () => {
        let taxInfo = document.getElementsByClassName("text-info")
        for (info of taxInfo) {
          if (info.style.display !== 'inline') {
            info.style.display = 'inline';
          }
          else {
            info.style.display = 'none'
          }
        }
      })
    </script>